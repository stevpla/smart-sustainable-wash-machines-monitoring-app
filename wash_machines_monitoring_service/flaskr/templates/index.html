<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>Wash Monitoring Service</title>
  <meta content="" name="description">
  <meta content="" name="keywords">
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Raleway:300,300i,400,400i,500,500i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">
  <!-- Vendor CSS Files -->
  <link href="/vendor/aos/aos.css" rel="stylesheet">
  <link href="/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
  <link href="/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
  <link href="/vendor/remixicon/remixicon.css" rel="stylesheet">
  <link href="/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">
  <!-- Template Main CSS File -->
  <link href="/css/style.css" rel="stylesheet">

  <style>
    .label-frame {
  background-color: green;
  padding: 9px;
  border-radius: 10px;
  display: inline-block;
      margin-left: 9px; /* Adjust the margin as needed */
}

.wash-message-label {
  color: white;
  text-transform: uppercase;
  font-weight: bold;
  font-size: 26px; /* Adjust the font size as needed */
}

.timer {
  font-size: 38px;
  color: blue;
}
  </style>
</head>
<body>

  <!-- ======= Header ======= -->
  <header id="header" class="fixed-top">
    <div class="container d-flex align-items-center justify-content-between">

      <h1 class="logo"><img src="img/logo.jpg" style="width:50px;"><a href="/">University of the Aegean</a></h1>
      <!-- Uncomment below if you prefer to use an image logo -->
      <!-- <a href="index.html" class="logo"><img src="assets/img/logo.png" alt="" class="img-fluid"></a>-->

      <nav id="navbar" class="navbar">
        <ul>
          <li><a class="nav-link scrollto active" href="#hero">Home</a></li>
          <li><a class="nav-link scrollto" href="#faq">Frequently Asked Questions</a></li>
          <li><a class="nav-link scrollto" href="#contact">Contact</a></li>
        </ul>
        <i class="bi bi-list mobile-nav-toggle"></i>
      </nav><!-- .navbar -->

    </div>
  </header><!-- End Header -->

  <!-- ======= Hero Section ======= -->
  <section id="hero" class="d-flex align-items-center">
    <div class="container position-relative" data-aos="fade-up" data-aos-delay="100">
      <div class="row justify-content-center">
        <div class="col-xl-7 col-lg-9 text-center">
          <h1>Εφαρμογή Live παρακολούθησης πλυντηρίων στην Φοιτητική Εστία Σάμου</h1>
          <h2>Live monitoring wash machines</h2>
        </div>
      </div>

      <div class="row icon-boxes">

        <div class="col-md-6 col-lg-3 d-flex align-items-stretch mb-5 mb-lg-0" data-aos="zoom-in" data-aos-delay="200">
          <div class="icon-box">
            <div class=""><i class="ri-stack-line"></i></div>
             <img src="img/wash_icon.png" alt="Wash 1" style="width:200px;height:200px;">
             <img src="img/wash_circle.png" class="inner-icon" id="wash-spinner" style="position: absolute; top: 126px; right: 83px; width:95px; height:95px;">
              <p class="description"><br>Πλυντήριο Νο. 1</p>
            <div id="LabelFrame1" class="label-frame">
              <label class="wash-message-label">FREE</label>
            </div>
              <div id="timer1" class="timer" style="display: none;"></div>
          </div>
        </div>

        <div class="col-md-6 col-lg-3 d-flex align-items-stretch mb-5 mb-lg-0" data-aos="zoom-in" data-aos-delay="200">
          <div class="icon-box">
            <div class=""><i class="ri-stack-line"></i></div>
             <img src="img/wash_icon.png" alt="Wash 1" style="width:200px;height:200px;">
              <img src="img/wash_circle.png" class="inner-icon" id="wash-spinner2" style="position: absolute; top: 126px; right: 83px; width:95px; height:95px;">
            <p class="description"><br>Πλυντήριο Νο. 2</p>
            <div id="LabelFrame2" class="label-frame">
              <label class="wash-message-label">FREE</label>
            </div>
            <div id="timer2" class="timer" style="display: none;"></div>
          </div>
        </div>

        <div class="col-md-6 col-lg-3 d-flex align-items-stretch mb-5 mb-lg-0" data-aos="zoom-in" data-aos-delay="200">
          <div class="icon-box">
            <div class=""><i class="ri-stack-line"></i></div>
             <img src="https://cdn-icons-png.flaticon.com/512/683/683138.png" alt="Wash 1" style="width:200px;height:200px;">
            <!--  <h4 class="title"><a href="">Lorem Ipsum</a></h4> -->
            <p class="description"><br>Πλυντήριο Νο. 3</p>
            <p class="description"><br><b><p style="color:red;">OUT OF SERVICE..</b></p></p>
          </div>
        </div>
      </div>
    </div>


  </section><!-- End Hero -->
  <main id="main">
    <!-- ======= Frequently Asked Questions Section ======= -->
    <section id="faq" class="faq section-bg">
      <div class="container" data-aos="fade-up">

        <div class="section-title">
          <h2>Frequently Asked Questions</h2>
          <p>Παρακάτω, θα βρείτε απαντήσεις σχετικά με ερωτήματα για τη λειτουργία της εφαρμογής.</p>
        </div>

        <div class="faq-list">
          <ul>
            <li data-aos="fade-up">
              <i class="bx bx-help-circle icon-help"></i> <a data-bs-toggle="collapse" class="collapse" data-bs-target="#faq-list-1">Το OUT OF SERVICE όταν ένα πλυντήριο χαλάει, το εμφανίζει αυτόματα η εφαρμογή ή πρέπει κάποιος χρήστης να το δηλώσει ; <i class="bx bx-chevron-down icon-show"></i><i class="bx bx-chevron-up icon-close"></i></a>
              <div id="faq-list-1" class="collapse show" data-bs-parent=".faq-list">
                <p>
                  Μέχρι ώρας, το δηλώνει ο δημιουργός της εφαρμογής στατικά.
                </p>
              </div>
            </li>

            <li data-aos="fade-up" data-aos-delay="100">
              <i class="bx bx-help-circle icon-help"></i> <a data-bs-toggle="collapse" data-bs-target="#faq-list-2" class="collapsed">Χρειάζεται να υπάρχει σύνδεση στο διαδίκτυο για να λειτουργήσει η εφαρμογή ; <i class="bx bx-chevron-down icon-show"></i><i class="bx bx-chevron-up icon-close"></i></a>
              <div id="faq-list-2" class="collapse" data-bs-parent=".faq-list">
                <p>
                  Η εφαρμογή μπορεί να λειτουργήσει κανονικά ακόμη και αν δεν έχει σύνδεση στο Internet.
                  Επειδή όλα τα δεδομένα δημιουργούνται και στέλνονται σε Raspberry Pi που είναι στο τοπικό
                  δίκτυο της Εστίας, δεν απαιτείται το Raspberry Pi και το ESP32-MCU να είναι συνδεδεμένα
                  στο Internet.
                  Το μόνο που χρειάζεται Internet, είναι η αποστολή email και η παραπομπή στα emails των
                  δημιουργών.
                </p>
              </div>
            </li>

            <li data-aos="fade-up" data-aos-delay="200">
              <i class="bx bx-help-circle icon-help"></i> <a data-bs-toggle="collapse" data-bs-target="#faq-list-3" class="collapsed">Μετά από κάποια πτώση ρεύματος, χρειάζεται
              κάποια ρύθμιση ώστε η εφαρμογή να τρέξει εκ νέου ή γίνεται αυτόματα ;<i class="bx bx-chevron-down icon-show"></i><i class="bx bx-chevron-up icon-close"></i></a>
              <div id="faq-list-3" class="collapse" data-bs-parent=".faq-list">
                <p>
                  Η εφαρμογή είναι ρυθμισμένη με κατάλληλες εντολές ώστε αν οι συσκευές (ESP32, Raspberry Pi)
                  χάσουν προσωρινά τη τροφοδοσία τους (πχ, πτώση ρεύματος), όταν επανέλθουν να εκτελέσουν κανονικά
                  την εφαρμογή αυτόματα.
                </p>
              </div>
            </li>
          </ul>
        </div>

      </div>
    </section><!-- End Frequently Asked Questions Section -->

    <!-- ======= Contact Section ======= -->
    <section id="contact" class="contact">
      <div class="container" data-aos="fade-up">

        <div class="section-title">
          <h2>Contact</h2>
          <p>Εδώ, μπορείτε να επικοινωνήσετε με τους δημιουργούς της εφαρμογής για όποια προβλήματα που ενδέχεται να υπάρχουν στην εφαρμογή. Επίσης, όποια ιδέα μπορεί να βελτιώσει την απόδοση και την ασφάλεια της εφαρμογής, είναι καλοδεχούμενη! Σας ευχαριστούμε.</p>
        </div>

        <div class="row mt-5">

          <div class="col-lg-4">
            <div class="info">
              <div class="email">
                <i class="bi bi-envelope"></i>
                <h4>Email:</h4>
                <p><a href = "mailto: nrekkas@gmail.com">nrekkas@gmail.com</a></p>
                <p><a href = "mailto: s.plastras@gmail.com">s.plastras@gmail.com</a></p>
              </div>
            </div>
          </div>

          <div class="col-lg-8 mt-5 mt-lg-0">
            <form action="/email_action" method="post" role="form" class="php-email-form">
              <div class="row gy-2 gx-md-3">
                <div class="col-md-6 form-group">
                  <input type="text" name="name" class="form-control" id="name" placeholder="Your Name" required>
                </div>
                <div class="col-md-6 form-group">
                  <input type="email" class="form-control" name="email" id="email" placeholder="Your Email" required>
                </div>
                <div class="form-group col-12">
                  <input type="text" class="form-control" name="subject" id="subject" placeholder="Subject" required>
                </div>
                <div class="form-group col-12">
                  <textarea class="form-control" name="message" rows="5" placeholder="Message" required></textarea>
                </div>
                <div class="text-center col-12"><button type="submit">Send Message</button></div>
              </div>
            </form>

            <div>
              {% if email_status == 1 %}
                <p style="color: green; width: 100%;"> <strong>Message has been sent!!</strong></p>
              {% endif %}
              {% if email_status == -1 %}
                <p style="color: red; width: 100%;"> <strong>An error occurred ... Try again later.</strong></p>
              {% endif %}
            </div>

          </div>
        </div>
      </div>
    </section><!-- End Contact Section -->

  </main><!-- End #main -->

  <!-- ======= Footer ======= -->
  <footer id="footer">

    <div class="footer-top">
      <div class="container">
        <div class="row">

          <div class="col-lg-3 col-md-6 footer-contact">
            <h3>Wash Machine Live Monitoring Service</h3>
            <p>
              Μια εφαρμογή για τους φοιτητές της Σάμου, όπου σε πραγματικό χρόνο μπορούν να βλέπουν τη λειτουργία των πλυντηρίων.
              Για την εφαρμογή, έχει αναπτυχθεί ηλεκτρονική πλακέτα με χρήση esp Arduino όπου μετράει το ηλεκτρικό ρεύμα των πλυντηρίων και εν συνεχεία με MQTT πρωτόκολλο, το στέλνει
              σε ένα web service το οποίο είναι χτισμένο με το framework Python Flask.
            </p>
          </div>

          <img src="/img/esp.jpg" alt="esp" style="width:200px;height:200px;">
          <img src="/img/python.png" alt="Python" style="width:200px;height:200px;">
          <img src="/img/flask.png" alt="Python" style="width:200px;height:200px;">
          <img src="/img/mqtt.jpg" alt="Python" style="width:200px;height:200px;">

        </div>
      </div>
    </div>

    <div class="container d-md-flex py-4">

      <div class="me-md-auto text-center text-md-start">
        <div class="credits">
          <!-- All the links in the footer should remain intact. -->
          <!-- You can delete the links only if you purchased the pro version. -->
          <!-- Licensing information: https://bootstrapmade.com/license/ -->
          <!-- Purchase the pro version with working PHP/AJAX contact form: https://bootstrapmade.com/onepage-multipurpose-bootstrap-template/ -->

        </div>
      </div>
    </div>
  </footer><!-- End Footer -->

  <div id="preloader"></div>
  <a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/mqtt/3.0.0/mqtt.min.js"></script>
  <!-- Vendor JS Files -->
  <script src="/vendor/purecounter/purecounter_vanilla.js"></script>
  <script src="/vendor/aos/aos.js"></script>
  <script src="/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="/vendor/glightbox/js/glightbox.min.js"></script>
  <script src="/vendor/isotope-layout/isotope.pkgd.min.js"></script>
  <script src="/vendor/swiper/swiper-bundle.min.js"></script>

  <!-- Template Main JS File -->
  <script src="/js/main.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>


<script>
function calculateTimeDifference(t){const e=new Date,n=String(e.getHours()).padStart(2,"0")+":"+String(e.getMinutes()).padStart(2,"0")+":"+String(e.getSeconds()).padStart(2,"0"),a=new Date(`2000-01-01T${t}`),s=new Date(`2000-01-01T${n}`),o=Math.abs(s-a),r=Math.floor(o/36e5),c=Math.floor(o%36e5/6e4),i=Math.floor(o%6e4/1e3);return`${String(r).padStart(2,"0")}:${String(c).padStart(2,"0")}:${String(i).padStart(2,"0")}`}function getCurrentTime(){const t=new Date;return String(t.getHours()).padStart(2,"0")+":"+String(t.getMinutes()).padStart(2,"0")+":"+String(t.getSeconds()).padStart(2,"0")}function startCountUpTimer1(t){let e;const n=document.getElementById("timer1");e=setInterval(function(){const a=t.split(":"),s=new Date;s.setHours(parseInt(a[0],10)),s.setMinutes(parseInt(a[1],10)),s.setSeconds(parseInt(a[2],10)),s.setSeconds(s.getSeconds()+1);const o=`${String(s.getHours()).padStart(2,"0")}:${String(s.getMinutes()).padStart(2,"0")}:${String(s.getSeconds()).padStart(2,"0")}`;n.textContent=o,t=s.toLocaleTimeString([],{hour12:!1}),0===flag1&&clearInterval(e)},1e3)}function startCountUpTimer2(t){let e;const n=document.getElementById("timer2");e=setInterval(function(){const a=t.split(":"),s=new Date;s.setHours(parseInt(a[0],10)),s.setMinutes(parseInt(a[1],10)),s.setSeconds(parseInt(a[2],10)),s.setSeconds(s.getSeconds()+1);const o=`${String(s.getHours()).padStart(2,"0")}:${String(s.getMinutes()).padStart(2,"0")}:${String(s.getSeconds()).padStart(2,"0")}`;n.textContent=o,t=s.toLocaleTimeString([],{hour12:!1}),0===flag2&&clearInterval(e)},1e3)}fetch("/check_status",{method:"GET"}).then(t=>t.json()).then(t=>{const e=t.state1,n=t.state2,a=t.time1,s=t.time2;e&&(document.getElementById("LabelFrame1").style.display="none",document.getElementById("wash-spinner").style.animation="spin 4s infinite linear",flag1=1,timeDifference=calculateTimeDifference(a),document.getElementById("timer1").style.display="block",startCountUpTimer("timer1",timeDifference)),n&&(document.getElementById("LabelFrame2").style.display="none",document.getElementById("wash-spinner2").style.animation="spin 4s infinite linear",flag2=1,timeDifference=calculateTimeDifference(s),document.getElementById("timer2").style.display="block",startCountUpTimer("timer2",timeDifference))}).catch(t=>{console.error("Cannot call Back-end API...")});var client=mqtt.connect("ws://10.10.10.151:9001");client.on("connect",function(){client.subscribe("wash_samos_1/ampere",function(t){}),client.subscribe("wash_samos_2/ampere",function(t){})});let static_counter_complete_wash_1=0,static_counter_complete_wash_1_b=0,flag1=0,static_counter_complete_wash_2=0,static_counter_complete_wash_2_b=0,flag2=0;function start_wash1_validator(t){let e=parseFloat(t);e>.01&&e<=.16&&1===flag1&&(12===static_counter_complete_wash_1?(flag1=0,static_counter_complete_wash_1=0,document.getElementById("timer1").style.display="none",document.getElementById("LabelFrame1").style.display="block",document.getElementById("wash-spinner").style.animation="none"):static_counter_complete_wash_1+=1),e>=.17&&0===flag1&&(5===static_counter_complete_wash_1_b?(flag1=1,static_counter_complete_wash_1_b=0,document.getElementById("LabelFrame1").style.display="none",document.getElementById("timer1").style.display="block",startCountUpTimer1("00:00:00")):static_counter_complete_wash_1_b+=1)}function start_wash2_validator(t){let e=parseFloat(t);e>.01&&e<=.16&&1===flag2&&(12===static_counter_complete_wash_2?(flag2=0,static_counter_complete_wash_2=0,document.getElementById("timer2").style.display="none",document.getElementById("LabelFrame2").style.display="block",document.getElementById("wash-spinner2").style.animation="none"):static_counter_complete_wash_2+=1),e>=.17&&0===flag2&&(5===static_counter_complete_wash_2_b?(flag2=1,static_counter_complete_wash_2_b=0,document.getElementById("LabelFrame2").style.display="none",document.getElementById("timer2").style.display="block",startCountUpTimer2("00:00:00")):static_counter_complete_wash_2_b+=1)}client.on("message",function(t,e){"wash_samos_1/ampere"===t?start_wash1_validator(e.toString()):"wash_samos_2/ampere"===t&&start_wash2_validator(e.toString())});
</script>
</body>
</html>
